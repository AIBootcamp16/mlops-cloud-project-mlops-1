# COVID-19 MLOps Pipeline Project

<br>

## ğŸ’» í”„ë¡œì íŠ¸ ì†Œê°œ
### ğŸ“Š í”„ë¡œì íŠ¸ ê°œìš”

COVID-19 ê°ì—¼ í™•ì‚° ë°ì´í„°ë¥¼ í™œìš©í•œ **ì‹œê³„ì—´ ì˜ˆì¸¡ ëª¨ë¸ ê°œë°œ** ë° **MLOps íŒŒì´í”„ë¼ì¸ êµ¬ì¶•** í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤.

- ì‹¤ì‹œê°„ ë°ì´í„° ìˆ˜ì§‘ë¶€í„° ëª¨ë¸ í•™ìŠµ, ì˜ˆì¸¡, ì„œë¹™ê¹Œì§€ ì „ì²´ ML ë¼ì´í”„ì‚¬ì´í´ì„ ìë™í™”
- ì‹œê³„ì—´ ë¶„ì„ì„ í†µí•œ COVID-19 í™•ì‚° ì¶”ì„¸ ì˜ˆì¸¡ ë° ì¸ì‚¬ì´íŠ¸ ì œê³µ
- Production í™˜ê²½ì„ ê³ ë ¤í•œ ì•ˆì •ì ì¸ MLOps ì¸í”„ë¼ êµ¬ì¶•

### âœ¨ ì£¼ìš” íŠ¹ì§•

- **ì™„ì „ ìë™í™”ëœ ML íŒŒì´í”„ë¼ì¸**: Airflow ê¸°ë°˜ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ìœ¼ë¡œ ë°ì´í„° ìˆ˜ì§‘ë¶€í„° ëª¨ë¸ ë°°í¬ê¹Œì§€ ìë™í™”
- **ì‹¤í—˜ ì¶”ì  ë° ëª¨ë¸ ê´€ë¦¬**: MLflowë¥¼ í™œìš©í•œ ì²´ê³„ì ì¸ ì‹¤í—˜ ê´€ë¦¬ ë° ëª¨ë¸ ë²„ì „ ê´€ë¦¬
- **ì‹œê³„ì—´ ì˜ˆì¸¡ ëª¨ë¸**: LSTM, Prophet ë“± ë‹¤ì–‘í•œ ì‹œê³„ì—´ ëª¨ë¸ ì•™ìƒë¸”
- **ì‹¤ì‹œê°„ ì˜ˆì¸¡ ì„œë¹„ìŠ¤**: FastAPI ê¸°ë°˜ ì›¹ ëŒ€ì‹œë³´ë“œë¥¼ í†µí•œ ì˜ˆì¸¡ ê²°ê³¼ ì‹œê°í™”
- **ì»¨í…Œì´ë„ˆí™”ëœ í™˜ê²½**: Docker Composeë¡œ ì¼ê´€ëœ ê°œë°œ/ìš´ì˜ í™˜ê²½ ì œê³µ

<br>

## ğŸ‘¨â€ğŸ‘©â€ğŸ‘¦â€ğŸ‘¦ íŒ€ êµ¬ì„±ì›

| ![ìµœí•´í˜](https://avatars.githubusercontent.com/u/156163982?v=4) | ![ì´ì¬ìœ¤](https://avatars.githubusercontent.com/u/156163982?v=4) | ![ë°•ì¤€ì˜](https://avatars.githubusercontent.com/u/156163982?v=4) | ![ì´ë™ê±´](https://avatars.githubusercontent.com/u/156163982?v=4) | 
|:-------------------------------------------------------------:|:-------------------------------------------------------------:|:-------------------------------------------------------------:|:-------------------------------------------------------------:| 
|            [ìµœí•´í˜](https://github.com/hyuk12)             |            [ì´ì¬ìœ¤](https://github.com/LEEJY0126)             |            [ë°•ì¤€ì˜](https://github.com/juny79)             |            [ì´ë™ê±´](https://github.com/dg5407)             |
|                    íŒ€ì¥, ë°ì´í„° íŒŒì´í”„ë¼ì¸ & ì‹œê³„ì—´ ëª¨ë¸ë§                    |                MLflow ì„œë²„ êµ¬ì¶• ë° API ì„œë¹™ ë° ì›¹ ëŒ€ì‹œë³´ë“œ                 |                             MLflow ì„œë²„ êµ¬ì¶• ë° API ì„œë¹™ ë° ì›¹ ëŒ€ì‹œë³´ë“œ                             |                             ë°ì´í„° íŒŒì´í”„ë¼ì¸ & ì‹œê³„ì—´ ëª¨ë¸ë§                             |                            |

<br>

## ğŸ”¨ ê¸°ìˆ  ìŠ¤íƒ

### Core

- **Language**: Python 3.11+
- **Containerization**: Docker, Docker Compose
- **Cloud Services**: AWS S3, RDS (PostgreSQL)

### ML/MLOps

- **Workflow Orchestration**: Apache Airflow 2.0+
- **Experiment Tracking**: MLflow
- **Machine Learning**: scikit-learn, XGBoost, LightGBM
- **Time Series**: Prophet, LSTM, statsmodels
- **Data Processing**: Pandas, NumPy, PySpark

### Backend & API

- **Web Framework**: FastAPI
- **Database**: PostgreSQL
- **Visualization**: Plotly, Matplotlib, Seaborn

### DevOps & Collaboration

- **Version Control**: Git, GitHub
- **Collaboration**: GitHub Projects, Notion

<br>

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°
```
covid-mlops-project/
â”œâ”€â”€ data-pipeline/              # ë°ì´í„° ìˆ˜ì§‘ ë° ì „ì²˜ë¦¬ íŒŒì´í”„ë¼ì¸
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ collectors/         # ë°ì´í„° ìˆ˜ì§‘ ëª¨ë“ˆ
â”‚   â”‚   â”œâ”€â”€ data_processing/    # ì „ì²˜ë¦¬ ëª¨ë“ˆ
â”‚   â”‚   â”œâ”€â”€ feature_engineering/# í”¼ì²˜ ì—”ì§€ë‹ˆì–´ë§
â”‚   â”‚   â”œâ”€â”€ modeling/           # ëª¨ë¸ í•™ìŠµ ë° í‰ê°€
â”‚   â”‚   â”œâ”€â”€ pipeline/           # MLflow íŒŒì´í”„ë¼ì¸
â”‚   â”‚   â”œâ”€â”€ config/             # ì„¤ì • íŒŒì¼
â”‚   â”‚   â””â”€â”€ utils/              # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
â”‚   â””â”€â”€ dags/                   # Airflow DAG ì •ì˜
â”‚       â”œâ”€â”€ covid_pipeline_dag.py      # í•™ìŠµ íŒŒì´í”„ë¼ì¸
â”‚       â””â”€â”€ batch_prediction_dag.py    # ë°°ì¹˜ ì˜ˆì¸¡
â”‚
â”œâ”€â”€ models/                     # ëª¨ë¸ ê°œë°œ ë° ì‹¤í—˜
â”‚   â”œâ”€â”€ src/                    # ëª¨ë¸ ì½”ë“œ
â”‚   â””â”€â”€ notebooks/              # EDA ë° ì‹¤í—˜ ë…¸íŠ¸ë¶
â”‚
â”œâ”€â”€ mlflow-server/             # MLflow ì„œë²„ êµ¬ì„±
â”‚   â””â”€â”€ docker/
â”‚
â”œâ”€â”€ api-service/               # FastAPI ì„œë¹™ ì„œë¹„ìŠ¤
â”‚   â”œâ”€â”€ src/                   # API ì½”ë“œ
â”‚   â””â”€â”€ templates/             # ì›¹ ëŒ€ì‹œë³´ë“œ í…œí”Œë¦¿
â”‚
â”œâ”€â”€ infrastructure/            # ì¸í”„ë¼ ì„¤ì •
â”‚   â””â”€â”€ docker/
â”‚       â”œâ”€â”€ Dockerfile.analysis
â”‚       â”œâ”€â”€ docker-compose.yml
â”‚       â””â”€â”€ requirements.txt
â”‚
â””â”€â”€ docs/                      # í”„ë¡œì íŠ¸ ë¬¸ì„œ
    â”œâ”€â”€ FE-GUIDE.md
    â”œâ”€â”€ data-processing-guide.md
    â””â”€â”€ ë„ì»¤_ì‚¬ìš©ë°©ë²•.md
```

<br>

## ğŸ’» ì£¼ìš” ê¸°ëŠ¥

### 1. ìë™í™”ëœ ë°ì´í„° íŒŒì´í”„ë¼ì¸

- **ë°ì´í„° ìˆ˜ì§‘**: Our World in Dataì˜ COVID-19 ë°ì´í„°ë¥¼ ìë™ìœ¼ë¡œ ìˆ˜ì§‘
- **ì „ì²˜ë¦¬**: ê²°ì¸¡ì¹˜ ì²˜ë¦¬, ì´ìƒì¹˜ ì œê±°, ë°ì´í„° ì •ê·œí™”
- **í”¼ì²˜ ì—”ì§€ë‹ˆì–´ë§**:
    - ì‹œê°„ ê¸°ë°˜ í”¼ì²˜ (ìš”ì¼, ì£¼ì°¨, ì›”)
    - Lag í”¼ì²˜ (1ì¼, 7ì¼, 14ì¼ ì „)
    - Rolling Statistics (ì´ë™í‰ê· , í‘œì¤€í¸ì°¨)
    - ì°¨ë¶„ ë° ë³€í™”ìœ¨ ê³„ì‚°
    - Future-Aware í”¼ì²˜ (ë¯¸ë˜ ì˜ˆì¸¡ ì‹œì ì—ë„ ê³„ì‚° ê°€ëŠ¥í•œ í”¼ì²˜ë§Œ ì‚¬ìš©)

### 2. ì‹œê³„ì—´ ì˜ˆì¸¡ ëª¨ë¸

- **ëª¨ë¸ ì•™ìƒë¸”**:
    - Random Forest
    - Gradient Boosting (XGBoost, LightGBM)
    - Linear Regression
    - Ridge Regression
- **ì˜ˆì¸¡ ì „ëµ**:
    - ì¬ê·€ì  ë‹¤ë‹¨ê³„ ì˜ˆì¸¡ (H-step ahead)
    - ë™ì  í”¼ì²˜ ì—…ë°ì´íŠ¸
    - ìµœê·¼ 60ì¼ í™€ë“œì•„ì›ƒ ê²€ì¦

### 3. MLflow ì‹¤í—˜ ê´€ë¦¬

- ëª¨ë“  ì‹¤í—˜ ìë™ ë¡œê¹… (íŒŒë¼ë¯¸í„°, ë©”íŠ¸ë¦­, ì•„í‹°íŒ©íŠ¸)
- ëª¨ë¸ ë²„ì „ ê´€ë¦¬ ë° ìŠ¤í…Œì´ì§€ ê´€ë¦¬ (Staging, Production)
- ë°ì´í„°ì…‹ ì¶”ì  ë° ê³„ë³´ ê´€ë¦¬
- S3 ê¸°ë°˜ ì•„í‹°íŒ©íŠ¸ ì €ì¥ì†Œ

### 4. ì‹¤ì‹œê°„ ì˜ˆì¸¡ ì„œë¹„ìŠ¤

- FastAPI ê¸°ë°˜ RESTful API
- ì›¹ ëŒ€ì‹œë³´ë“œë¥¼ í†µí•œ ì˜ˆì¸¡ ê²°ê³¼ ì‹œê°í™”
-
<br>

## ğŸ› ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Data Source    â”‚
â”‚ (Our World Data)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Airflow      â”‚â”€â”€â”€â”€â–¶â”‚   MLflow     â”‚
â”‚  (Orchestrator) â”‚     â”‚  (Tracking)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                     â”‚
         â–¼                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Data Pipeline  â”‚     â”‚  PostgreSQL  â”‚
â”‚  â€¢ Collection   â”‚     â”‚  (Metadata)  â”‚
â”‚  â€¢ Processing   â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚  â€¢ Features     â”‚              â”‚
â”‚  â€¢ Training     â”‚              â–¼
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚              â”‚   AWS S3     â”‚
         â”‚              â”‚ (Artifacts)  â”‚
         â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   FastAPI       â”‚
â”‚  (Prediction    â”‚
â”‚   Service)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Web Dashboard  â”‚
â”‚  (Visualization)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ› ï¸ ì‘í’ˆ ì•„í‚¤í…ì²˜(í•„ìˆ˜X)
- #### _ì•„ë˜ ì´ë¯¸ì§€ëŠ” ì˜ˆì‹œì…ë‹ˆë‹¤_
![ì´ë¯¸ì§€ ì„¤ëª…](https://miro.medium.com/v2/resize:fit:4800/format:webp/1*ub_u88a4MB5Uj-9Eb60VNA.jpeg)

<br>

## ğŸš¨ íŠ¸ëŸ¬ë¸” ìŠˆíŒ…

### 1. MLflow ì„œë²„ ì—°ê²° ì‹¤íŒ¨

**ë¬¸ì œ**

`MlflowException: Failed to connect to MLflow tracking server`

**í•´ê²°**

- `.env` íŒŒì¼ì˜ `MLFLOW_TRACKING_URI` í™•ì¸
- MLflow ì»¨í…Œì´ë„ˆ ìƒíƒœ í™•ì¸: `docker-compose ps`
- ë¡œì»¬ íŒŒì¼ ì‹œìŠ¤í…œìœ¼ë¡œ í´ë°±: `MLFLOW_TRACKING_URI=file:/tmp/mlruns`

### 2. AWS S3 ê¶Œí•œ ì˜¤ë¥˜

**ë¬¸ì œ**

`botocore.exceptions.NoCredentialsError`

**í•´ê²°**

- AWS ìê²© ì¦ëª… í™•ì¸ (`AWS_ACCESS_KEY_ID`, `AWS_SECRET_ACCESS_KEY`)
- IAM ì •ì±…ì—ì„œ S3 ë²„í‚· ì ‘ê·¼ ê¶Œí•œ í™•ì¸
- ë¡œì»¬ ê°œë°œ ì‹œ íŒŒì¼ ì‹œìŠ¤í…œ ì‚¬ìš© ê¶Œì¥

### 3. ë©”ëª¨ë¦¬ ë¶€ì¡± ì˜¤ë¥˜

**ë¬¸ì œ**

`MemoryError: Unable to allocate array`

**í•´ê²°**

- Docker ë©”ëª¨ë¦¬ í• ë‹¹ ì¦ê°€ (Docker Desktop ì„¤ì •)
- ë°ì´í„° ì²­í¬ ì²˜ë¦¬ ì‚¬ìš©: `CHUNK_SIZE` ì„¤ì • ì¡°ì •
- í”¼ì²˜ ê°œìˆ˜ ì¤„ì´ê¸° ë˜ëŠ” ìƒ˜í”Œë§ ì ìš©

<br>

## ğŸ“Œ í”„ë¡œì íŠ¸ íšŒê³ 
### ë°•íŒ¨ìº 
- _í”„ë¡œì íŠ¸ íšŒê³ ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”_

<br>

## ğŸ“š ì°¸ê³  ìë£Œ

### ë°ì´í„° ì¶œì²˜

- [Our World in Data - COVID-19 Dataset](https://ourworldindata.org/covid-cases)
- [WHO COVID-19 Dashboard](https://covid19.who.int/)

### ê¸°ìˆ  ë¬¸ì„œ

- [Airflow Documentation](https://airflow.apache.org/docs/)
- [MLflow Documentation](https://mlflow.org/docs/latest/index.html)
- [FastAPI Documentation](https://fastapi.tiangolo.com/)
- [Prophet Documentation](https://facebook.github.io/prophet/)
