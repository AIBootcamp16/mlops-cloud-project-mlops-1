# Dockerfile 준비.

```dockerfile
# COVID-19 전염병 예측 및 백신 효과성 분석을 위한 Docker 이미지
FROM python:3.11-slim

# 환경 변수 설정
ENV PYTHONUNBUFFERED=1
ENV JUPYTER_ENABLE_LAB=yes

# 시스템 패키지 설치
RUN apt-get update && apt-get install -y \
    git \
    wget \
    curl \
    vim \
    build-essential \
    libgdal-dev \
    gdal-bin \
    libspatialindex-dev \
    && rm -rf /var/lib/apt/lists/*

# 작업 디렉토리 생성
WORKDIR /workspace

# Python 라이브러리 설치용 requirements.txt 생성
COPY requirements.txt .

# Python 패키지 설치
RUN pip install --no-cache-dir --upgrade pip && \
    pip install --no-cache-dir -r requirements.txt

# Jupyter 설정 디렉토리 생성
RUN mkdir -p /root/.jupyter

# Jupyter 설정 파일 생성
RUN echo "c.ServerApp.token = ''" > /root/.jupyter/jupyter_server_config.py && \
    echo "c.ServerApp.password = ''" >> /root/.jupyter/jupyter_server_config.py && \
    echo "c.ServerApp.allow_root = True" >> /root/.jupyter/jupyter_server_config.py && \
    echo "c.ServerApp.ip = '0.0.0.0'" >> /root/.jupyter/jupyter_server_config.py

# 프로젝트 디렉토리 구조 생성
RUN mkdir -p /workspace/data/raw && \
    mkdir -p /workspace/data/processed && \
    mkdir -p /workspace/notebooks && \
    mkdir -p /workspace/src && \
    mkdir -p /workspace/models && \
    mkdir -p /workspace/results

# 포트 노출 (Jupyter Lab용)
EXPOSE 8888

# 기본 명령어
CMD ["jupyter", "lab", "--port=8888", "--no-browser", "--allow-root", "--ip=0.0.0.0"]
```

# 필수 라이브러리 
```text
# 기본 데이터 분석 라이브러리
pandas>=2.0.0
numpy>=1.24.0
scipy>=1.10.0

# 시각화 라이브러리
matplotlib>=3.7.0
seaborn>=0.12.0
plotly>=5.15.0
bokeh>=3.2.0

# 통계 분석
statsmodels>=0.14.0
scikit-learn>=1.3.0

# 시계열 분석 (전염병 예측용)
prophet>=1.1.4
pmdarima>=2.0.3
statsforecast>=1.6.0

# 지리적 데이터 분석 (국가별 분석용)
geopandas>=0.13.0
folium>=0.14.0
contextily>=1.3.0

# 기계학습 및 딥러닝
xgboost>=1.7.0
lightgbm>=4.0.0
tensorflow>=2.13.0

# 데이터 수집 및 처리
requests>=2.31.0
beautifulsoup4>=4.12.0
openpyxl>=3.1.0

# COVID-19 데이터 관련
covid>=2.4.0

# Jupyter 관련
jupyterlab>=4.0.0
jupyter>=1.0.0
ipykernel>=6.25.0
ipywidgets>=8.1.0

# 유틸리티
tqdm>=4.65.0
python-dotenv>=1.0.0
```

# 도커 빌드
```commandline
docker build -t <image name>:<tag> .
```

# 도커 푸시
```commandline
docker push <docker hub username>/<image name>:<tag>
```
- 이 때 도커 허브에 올리기 위해서는 도커 로그인을 해야한다.

# 도커 컴포즈 파일 구성
```yaml
version: '3.8'

services:
  covid-analysis:
    build: .
    ports:
      - "8888:8888"
    volumes:
      - ./workspace:/workspace
      - ./data:/workspace/data
    environment:
      - JUPYTER_ENABLE_LAB=yes
      - PYTHONPATH=/workspace
    working_dir: /workspace
    restart: unless-stopped
```

# 실행 방법
1. 첫번째로 docker-compose.yml 이 있는 경로로 이동한다.
2. cli 환경에서 `docker compose up -d` 명령을 수행한다.
3. `localhost:8888` 에 접근하게 되면 주피터 랩을 쓸 수 있다.
4. 해당 하는 곳에서 작업을 하게되면 로컬 환경의 docker/workspace/data 내부에 자료들이 남는다.
5. 깃헙에 올릴 시에 해당하는 workspace 는 올리면 안된다.